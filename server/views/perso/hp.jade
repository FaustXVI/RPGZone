mixin hp(label)
    - var mapping = "hp."+label
    +calculableEntry(mapping)&attributes(attributes,{id:label})


mixin state(label)
    li.col-xs-3
        a.btn.btn-primary.switch(type="button",data-btn-checkbox,data-ng-model="character.state."+label)
            span #{t('character.state.'+label)}

mixin stateIfTrue(label)
    div.btn-group
        a.btn.btn-primary.switch(type="button",data-btn-checkbox,data-ng-model="character.state."+label,data-ng-show="character.state."+label)
            span #{t('character.state.'+label)}

+section("hp")
    +hp("current")(red-if-bloodied)
    +hp("temporary")
    +hp("max")
    div.form-group
        label.col-xs-3(for="currentSurge") #{t('character.hp.surge')}
        div.col-xs-3
            input.form-control(type="number",data-ng-model="character.hp.currentSurge",name="currentSurge",id="currentSurge")
        div.col-xs-2
            button.btn.btn-success(type="button",data-ng-click="useSurge()",id="useSurge")
                span.glyphicon.glyphicon-heart
        label.col-xs-1(for="maxSurge") /
        div.col-xs-3
            input.form-control(type="number",data-ng-model="character.hp.maxSurge",name="maxSurge",id="maxSurge")
    section
        div.form-group.dropdown
            button(type="button",class="btn btn-primary dropdown-toggle col-xs-12",data-toggle="dropdown")
                | #{t('character.state.title')}
            ul.dropdown-menu.col-xs-12
                +state("blinded")
                +state("dazed")
                +state("deafened")
                +state("dominated")
                +state("dying")
                +state("helpless")
                +state("immobilized")
                +state("marked")
                +state("petrified")
                +state("prone")
                +state("restrained")
                +state("slowed")
                +state("stunned")
                +state("surprised")
                +state("unconscious")
                +state("weakened")
        div.form-group
            +stateIfTrue("blinded")
            +stateIfTrue("dazed")
            +stateIfTrue("deafened")
            +stateIfTrue("dominated")
            +stateIfTrue("dying")
            +stateIfTrue("helpless")
            +stateIfTrue("immobilized")
            +stateIfTrue("marked")
            +stateIfTrue("petrified")
            +stateIfTrue("prone")
            +stateIfTrue("restrained")
            +stateIfTrue("slowed")
            +stateIfTrue("stunned")
            +stateIfTrue("surprised")
            +stateIfTrue("unconscious")
            +stateIfTrue("weakened")
